<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trove Only Test</title>

  <!-- Load Scittle core -->
  <script src="https://cdn.jsdelivr.net/npm/scittle@0.7.28/dist/scittle.js"
          type="application/javascript"></script>

  <!-- Load Trove source files BEFORE requiring them -->
  <script src="src/taoensso/trove/utils.cljc" type="application/x-scittle"></script>
  <script src="src/taoensso/trove/console.cljc" type="application/x-scittle"></script>
  <script src="src/taoensso/trove.cljc" type="application/x-scittle"></script>

  <style>
    body { font-family: monospace; margin: 20px; }
    h1 { color: #333; }
    .log-container { background: white; border: 1px solid #ddd; padding: 15px; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ðŸ§ª Trove Only Test</h1>
  
  <div>
    <h2>Test Status</h2>
    <p id="status">Loading...</p>
  </div>

  <div class="log-container">
    <h2>Console Logs</h2>
    <div id="logs"></div>
  </div>

  <script type="application/x-scittle">
    ;; Test loading Trove utilities
    (println "ðŸ§ª Testing Trove loading...")
    
    ;; Load Trove utils first
    (require '[taoensso.trove.utils :as utils])
    (println "âœ… Trove utils loaded!")
    
    ;; Load Trove console backend
    (require '[taoensso.trove.console :as console])
    (println "âœ… Trove console backend loaded!")
    
    ;; Load main Trove
    (require '[taoensso.trove :as trove])
    (println "âœ… Trove main loaded!")
    
    ;; Test Trove logging
    (trove/log! {:level :info :id :test/basic :data {:message "Basic test"}})
    (println "âœ… Trove logging works!")
    
    ;; Test all levels
    (trove/log! {:level :trace :id :test/trace})
    (trove/log! {:level :debug :id :test/debug})
    (trove/log! {:level :info :id :test/info})
    (trove/log! {:level :warn :id :test/warn})
    (trove/log! {:level :error :id :test/error})
    (trove/log! {:level :fatal :id :test/fatal})
    
    (println "âœ… All Trove tests completed!")
    
    ;; Update status
    (set! (.-innerHTML (js/document.getElementById "status"))
      "âœ… Trove loaded and tested successfully!")
  </script>
</body>
</html>
